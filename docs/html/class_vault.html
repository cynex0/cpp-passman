<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Password Manager: Vault Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Password Manager
   </div>
   <div id="projectbrief">Simple password manager application in C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_vault-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Vault Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5f4751bc69cb368d52d5da60969d9d68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vault.html#a5f4751bc69cb368d52d5da60969d9d68">Vault</a> ()</td></tr>
<tr class="separator:a5f4751bc69cb368d52d5da60969d9d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8c36c325884d12bcf017762668bed50"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vault.html#ac8c36c325884d12bcf017762668bed50">Vault</a> (unsigned int id_, unsigned int user_id_)</td></tr>
<tr class="separator:ac8c36c325884d12bcf017762668bed50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0008b4f73bd66c2a70e31648d16424e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vault.html#a0008b4f73bd66c2a70e31648d16424e7">Vault</a> (unsigned int user_id_, std::string name_, const std::string &amp;pass)</td></tr>
<tr class="separator:a0008b4f73bd66c2a70e31648d16424e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355bf1d8e895cbb8fe6d77e0ed189046"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vault.html#a355bf1d8e895cbb8fe6d77e0ed189046">validateMasterPassword</a> (const std::string &amp;pass)</td></tr>
<tr class="separator:a355bf1d8e895cbb8fe6d77e0ed189046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c39e00c9e889afa0a16b9ec2d2b92c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vault.html#ad1c39e00c9e889afa0a16b9ec2d2b92c">writeToBin</a> ()</td></tr>
<tr class="separator:ad1c39e00c9e889afa0a16b9ec2d2b92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d30ecaea48c62dd1fb606b703d8d4b"><td class="memItemLeft" align="right" valign="top"><a id="ad4d30ecaea48c62dd1fb606b703d8d4b" name="ad4d30ecaea48c62dd1fb606b703d8d4b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>readFromBin</b> ()</td></tr>
<tr class="separator:ad4d30ecaea48c62dd1fb606b703d8d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b4bd2fe75e727b265414cd9fc902c4"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vault.html#a65b4bd2fe75e727b265414cd9fc902c4">getAccountCount</a> ()</td></tr>
<tr class="separator:a65b4bd2fe75e727b265414cd9fc902c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af45437033b154b998d5453e5466b17ea"><td class="memItemLeft" align="right" valign="top"><a id="af45437033b154b998d5453e5466b17ea" name="af45437033b154b998d5453e5466b17ea"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>id</b></td></tr>
<tr class="separator:af45437033b154b998d5453e5466b17ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95b12646fed487b8f6fc316d3d591e1"><td class="memItemLeft" align="right" valign="top"><a id="ae95b12646fed487b8f6fc316d3d591e1" name="ae95b12646fed487b8f6fc316d3d591e1"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>name</b></td></tr>
<tr class="separator:ae95b12646fed487b8f6fc316d3d591e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="friends" name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a53eafc4576f0d7f2eb32d48048c32e14"><td class="memItemLeft" align="right" valign="top"><a id="a53eafc4576f0d7f2eb32d48048c32e14" name="a53eafc4576f0d7f2eb32d48048c32e14"></a>
std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator&lt;&lt;</b> (std::ostream &amp;os, const <a class="el" href="class_vault.html">Vault</a> &amp;v)</td></tr>
<tr class="separator:a53eafc4576f0d7f2eb32d48048c32e14"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5f4751bc69cb368d52d5da60969d9d68" name="a5f4751bc69cb368d52d5da60969d9d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f4751bc69cb368d52d5da60969d9d68">&#9670;&#160;</a></span>Vault() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Vault::Vault </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a new instance of the <a class="el" href="class_vault.html">Vault</a> class with default values.</p>
<p>The constructor initializes a <a class="el" href="class_vault.html">Vault</a> object with empty values for its properties:</p><ul>
<li>id: The ID of the vault (default constructed).</li>
<li>security_level: The security level of the vault (default constructed).</li>
<li>iteration_count: The iteration count for cryptographic operations in the vault (default constructed). </li>
</ul>

</div>
</div>
<a id="ac8c36c325884d12bcf017762668bed50" name="ac8c36c325884d12bcf017762668bed50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8c36c325884d12bcf017762668bed50">&#9670;&#160;</a></span>Vault() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Vault::Vault </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>user_id_</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a new instance of the <a class="el" href="class_vault.html">Vault</a> class with the specified ID and user ID for reading from binfile.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id_</td><td>The ID of the vault. </td></tr>
    <tr><td class="paramname">user_id_</td><td>The ID of the user associated with the vault.</td></tr>
  </table>
  </dd>
</dl>
<p>The constructor initializes a <a class="el" href="class_vault.html">Vault</a> object with the provided ID and user ID. It also sets the security level and iteration count to 0. Additionally, it sets the directory path for the vault based on the user ID and vault ID. Finally, it reads the vault data from the corresponding binary file using the readFromBin() function. </p>

</div>
</div>
<a id="a0008b4f73bd66c2a70e31648d16424e7" name="a0008b4f73bd66c2a70e31648d16424e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0008b4f73bd66c2a70e31648d16424e7">&#9670;&#160;</a></span>Vault() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Vault::Vault </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>user_id_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pass</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a new instance of the <a class="el" href="class_vault.html">Vault</a> class with the specified user ID, name, security level, and master password.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_id_</td><td>The ID of the user associated with the vault. </td></tr>
    <tr><td class="paramname">name_</td><td>The name of the vault. </td></tr>
    <tr><td class="paramname">pass</td><td>The master password for the vault.</td></tr>
  </table>
  </dd>
</dl>
<p>The constructor initializes a <a class="el" href="class_vault.html">Vault</a> object with the provided user ID, name, security level, and master password. It generates a random ID for the vault using the RAND_bytes function. The constructor also sets the directory path for the vault based on the user ID and vault ID. Additionally, it creates a directory with the corresponding directory path using the fs::create_directory function. The constructor then derives a key from the master password using the masterPassword.deriveKey function.</p>
<p>Note: The constructor sets the iteration count based on the security level, where the iteration count is calculated as 1000 times 2 raised to the power of (security level - 1) if the security level is greater than 0; otherwise, it sets the iteration count to 0. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a65b4bd2fe75e727b265414cd9fc902c4" name="a65b4bd2fe75e727b265414cd9fc902c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b4bd2fe75e727b265414cd9fc902c4">&#9670;&#160;</a></span>getAccountCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Vault::getAccountCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the number of accounts stored in the vault.</p>
<p>The function counts the number of account files with the extension ".acc" located in the directory path of the vault. It iterates through each file in the directory and increments the count for each file with the ".acc" extension.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of accounts stored in the vault. </dd></dl>

</div>
</div>
<a id="a355bf1d8e895cbb8fe6d77e0ed189046" name="a355bf1d8e895cbb8fe6d77e0ed189046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a355bf1d8e895cbb8fe6d77e0ed189046">&#9670;&#160;</a></span>validateMasterPassword()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Vault::validateMasterPassword </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pass</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Validates the provided password against the master password key of the vault.</p>
<p>The function checks if the provided password matches the master password of the vault by calling the <code>validatePassword</code> function of the <code>masterPassword</code> object. It returns the result of the validation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pass</td><td>The password to validate against the master password. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the provided password is valid and matches the master password, <code>false</code> otherwise. </dd></dl>

</div>
</div>
<a id="ad1c39e00c9e889afa0a16b9ec2d2b92c" name="ad1c39e00c9e889afa0a16b9ec2d2b92c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c39e00c9e889afa0a16b9ec2d2b92c">&#9670;&#160;</a></span>writeToBin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Vault::writeToBin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes the vault data to a binary file.</p>
<p>The function creates a binary file named "vaultData.vlt" in the directory path of the vault. It writes the vault data to the file, including the ID, security level, name, master password key, and salt.</p>
<p>Note: The file format begins with a header field "VLT" in ASCII to identify the file.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>if an error occurs while writing the file. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="vault_8h_source.html">vault.h</a></li>
<li>vault.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
